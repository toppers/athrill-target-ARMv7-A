machine:
  extras:
    arch_type: arm
    pseudo_codes:
      - name: arm_add_imm
        inputs:
          cond: PseudoCodeConditionDataType
          S: PseudoCodeUpdateStatusFlagType
          Rd: PseudoCodeRegisterDataType
          Rn: PseudoCodeRegisterDataType
          imm32: PseudoCodeImmediateData32Type
        outputs:
          result: sint32
          status_flag: PseudoCodeStatusFlagType
      - name: arm_adr_imm
        inputs:
          cond: PseudoCodeConditionDataType
          Rd: PseudoCodeRegisterDataType
          imm32: PseudoCodeImmediateData32Type
          add: bool
        outputs:
          result: sint32
          status_flag: PseudoCodeStatusFlagType
      - name: arm_add_spimm
        inputs:
          cond: PseudoCodeConditionDataType
          S: PseudoCodeUpdateStatusFlagType
          Rd: PseudoCodeRegisterDataType
          SP: PseudoCodeRegisterDataType
          imm32: PseudoCodeImmediateData32Type
        outputs:
          result: sint32
          status_flag: PseudoCodeStatusFlagType
      - name: arm_subs_pclr
        inputs:
          cond: PseudoCodeConditionDataType
          opcode: uint8
          Rn: PseudoCodeRegisterDataType
          Rm: PseudoCodeRegisterDataType
          register_form: bool
          shift_t: sint32
          shift_n: sint32
          imm32: PseudoCodeImmediateData32Type
        outputs:
          result: sint32
          status_flag: PseudoCodeStatusFlagType
      - name: arm_mov_imm
        inputs:
          cond: PseudoCodeConditionDataType
          S: PseudoCodeUpdateStatusFlagType
          Rd: PseudoCodeRegisterDataType
          imm32: PseudoCodeImmediateData32Type
        outputs:
          result: sint32
          status_flag: PseudoCodeStatusFlagType
      - name: arm_mov_reg
        inputs:
          cond: PseudoCodeConditionDataType
          S: PseudoCodeUpdateStatusFlagType
          Rd: PseudoCodeRegisterDataType
          Rm: PseudoCodeRegisterDataType
        outputs:
          result: sint32
          status_flag: PseudoCodeStatusFlagType
      - name: arm_bl_imm
        inputs:
          cond: PseudoCodeConditionDataType
          imm32: PseudoCodeImmediateData32Type
          type: sint32
        outputs:
          LR: PseudoCodeRegisterDataType
          result: sint32
      - name: arm_b_imm
        inputs:
          cond: PseudoCodeConditionDataType
          imm32: PseudoCodeImmediateData32Type
          PC: PseudoCodeRegisterDataType
        outputs:
          result: sint32
      - name: arm_bx_reg
        inputs:
          cond: PseudoCodeConditionDataType
          Rm: PseudoCodeRegisterDataType
        outputs:
          result: sint32
      - name: arm_ldr_imm
        inputs:
          cond: PseudoCodeConditionDataType
          imm32: PseudoCodeImmediateData32Type
          add: bool
          index: bool
          wback: bool
          Rn: PseudoCodeRegisterDataType
          Rt: PseudoCodeRegisterDataType
        outputs:
          result: sint32
      - name: arm_str_imm
        inputs:
          cond: PseudoCodeConditionDataType
          imm32: PseudoCodeImmediateData32Type
          add: bool
          index: bool
          wback: bool
          Rn: PseudoCodeRegisterDataType
          Rt: PseudoCodeRegisterDataType
        outputs:
          Rn: PseudoCodeRegisterDataType
  
decoder:
  namespace: arm

instructions:
  - name: arm_add_imm_a1
    format: xxxx:cond|00|1|0100|x:S|xxxx:Rn|xxxx:Rd|xxxx xxxx xxxx:imm12
    condition:
      Rn: '!= 13'
    extras:
      clocks: 10
      pseudo_code: arm_add_imm
      child_codes:
        - arm_adr_a1
        - arm_subs_pclr_a1
  - name: arm_add_spimm_a1
    format: xxxx:cond|00|1|0100|x:S|1101|xxxx:Rd|xxxx xxxx xxxx:imm12
    extras:
      clocks: 10
      pseudo_code: arm_add_spimm
      child_codes:
        - arm_subs_pclr_a1
  - name: arm_adr_a1
    format: xxxx:cond|00|1|0100|0|1111|xxxx:Rd|xxxx xxxx xxxx:imm12
    extras:
      clocks: 10
      pseudo_code: arm_adr_imm
  - name: arm_subs_pclr_a1
    format: xxxx:cond|00|1|xxxx:opcode|1|xxxx:Rn|1111|xxxx xxxx xxxx:imm12
    extras:
      clocks: 10
      pseudo_code: arm_subs_pclr
  - name: push_1
    format: xxxx:cond|1001 00|1|0|1101|xxxx xxxx xxxx xxxx:register_list
    extras:
      clocks: 10
      pseudo_code: arm_add_imm
  - name: arm_mov_imm_a1
    format: xxxx:cond|00|1|1101|x:S|0000|xxxx:Rd|xxxxxxxxxxxx:imm12
    extras:
      clocks: 10
      pseudo_code: arm_mov_imm
  - name: arm_mov_imm_a2
    format: xxxx:cond|0011|0000|xxxx:imm4|xxxx:Rd|xxxxxxxxxxxx:imm12
    extras:
      clocks: 10
      pseudo_code: arm_mov_imm
  - name: arm_mov_reg_a1
    format: xxxx:cond|00|0|1101|x:S|0000|xxxx:Rd|00000000|xxxx:Rm
    extras:
      clocks: 10
      pseudo_code: arm_mov_reg
      child_codes:
        - arm_subs_pclr_a1
  - name: arm_bl_a1
    format: xxxx:cond|1011|xxxxxxxxxxxxxxxxxxxxxxxx:imm24
    condition:
      cond: '!= 15'
    extras:
      clocks: 10
      pseudo_code: arm_bl_imm
  - name: arm_blx_a2
    format: 1111|101|x:H|xxxxxxxxxxxxxxxxxxxxxxxx:imm24
    extras:
      clocks: 10
      pseudo_code: arm_bl_imm
  - name: arm_b_a1
    format: xxxx:cond|1010|xxxxxxxxxxxxxxxxxxxxxxxx:imm24
    condition:
      cond: '!= 15'
    extras:
      clocks: 10
      pseudo_code: arm_b_imm
  - name: arm_bx_a1
    format: xxxx:cond|00010010|1111|1111|1111|0001|xxxx:Rm
    condition:
      cond: '!= 15'
    extras:
      clocks: 10
      pseudo_code: arm_bx_reg

  - name: arm_str_imm_a1
    format: xxxx:cond|010|x:P|x:U|0|x:W|0|xxxx:Rn|xxxx:Rt|xxxxxxxxxxxx:imm12
    extras:
      clocks: 10
      pseudo_code: arm_str_imm
  - name: arm_ldr_imm_a1
    format: xxxx:cond|010|x:P|x:U|0|x:W|1|xxxx:Rn|xxxx:Rt|xxxxxxxxxxxx:imm12
    extras:
      clocks: 10
      pseudo_code: arm_ldr_imm

